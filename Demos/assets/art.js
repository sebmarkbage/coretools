(function(){this.ART=new Class;ART.Element=new Class({inject:function(b){if(b.element)b=b.element;b.appendChild(this.element);return this},eject:function(){var b=this.element,d=b.parentNode;d&&d.removeChild(b);return this},listen:function(b,d){if(!this._events)this._events={};if(typeof b!="string")for(var a in b)this.listen(a,b[a]);else{this._events[b]||(this._events[b]=new Table);var c=this._events[b];if(c.get(d))return this;a=d.bind(this);c.set(d,a);c=this.element;c.addEventListener?c.addEventListener(b,
a,false):c.attachEvent("on"+b,a)}return this},ignore:function(b,d){if(!this._events)return this;if(typeof b!="string"){for(var a in b)this.ignore(a,b[a]);return this}a=this._events[b];if(!a)return this;if(d==null)a.each(function(f){this.ignore(b,f)},this);else{a=a.get(d);if(!a)return this;var c=this.element;c.removeEventListener?c.removeEventListener(b,a,false):c.detachEvent("on"+b,a)}return this}});ART.Container=new Class({grab:function(){for(var b=0;b<arguments.length;b++)arguments[b].inject(this);
return this}});var h=0;ART.uniqueID=function(){return((new Date).getTime()+h++).toString(36)};Color.detach=function(b){b=new Color(b);return[Color.rgb(b.red,b.green,b.blue).toString(),b.alpha]}})();
(function(){var h=Math.PI*2,b=h/2,d=b/2,a=-d,c=function(e,g,k,m,l,j,w,n,r){k=j/2;var p=w/2,o=e*e*g*g,s=g*g*k*k,t=e*e*p*p,v=o-t-s;if(v<0){v=Math.sqrt(1-v/o);e*=v;g*=v}else{v=Math.sqrt(v/(t+s));if(m==l)v=-v;k+=-v*w/2*e/g;p+=v*j/2*g/e}m=Math.atan2(k,-p);j=Math.atan2(-j+k,w-p);if(!+l){l=m;m=j;j=l}if(j<m)j+=h;k+=n;p+=r;return{circle:[k-e,p-g,k+e,p+g],boundsX:[j>h+d||m<d&&j>d?k-e:n,j>h+a||m<a&&j>a?k+e:n],boundsY:[j>b?p-g:r,j>h+0||m<0&&j>0?p+g:r]}},f=function(e,g){var k=[],m=[],l=g!=null?function(x){k.push(x);
return Math.round(x*g)}:function(x){k.push(x);return x},j=g!=null?function(x){m.push(x);return Math.round(x*g)}:function(x){m.push(x);return x},w=g!=null?function(x){return Math.round(x*g)}:function(x){return x},n=0,r=0,p=0,o=0,s,t="",v,z;for(i=0;i<e.length;i++){var q=Array.slice(e[i]),u=q.shift();s=u.toLowerCase();var y=s==u?n:0;u=s==u?r:0;if(s!="m"&&v==null){v=n;z=r}switch(s){case "m":t+="m"+l(n=y+q[0])+","+j(r=u+q[1]);break;case "l":t+="l"+l(n=y+q[0])+","+j(r=u+q[1]);break;case "c":p=y+q[2];o=
u+q[3];t+="c"+l(y+q[0])+","+j(u+q[1])+","+l(p)+","+j(o)+","+l(n=y+q[4])+","+j(r=u+q[5]);break;case "s":s=[n*2-p,r*2-o];p=y+q[0];o=u+q[1];t+="c"+l(s[0])+","+j(s[1])+","+l(p)+","+j(o)+","+l(n=y+q[2])+","+j(r=u+q[3]);break;case "q":p=y+q[0];o=u+q[1];t+="c"+l(y+q[0])+","+j(u+q[1])+","+l(p)+","+j(o)+","+l(n=y+q[2])+","+j(r=u+q[3]);break;case "t":s=[n*2-p,r*2-o];p=y+s[0];o=u+s[1];t+="c"+l(p)+","+j(o)+","+l(p)+","+j(o)+","+l(n=y+q[0])+","+j(r=u+q[1]);break;case "a":p=y+q[5];o=u+q[6];if(!+q[0]||!+q[1]||p==
n&&o==r){t+="l"+l(n=p)+","+j(r=o);break}q[7]=n;q[8]=r;s=c.apply(null,q);k.push.apply(k,s.boundsX);m.push.apply(m,s.boundsY);t+=(q[4]==1?"wa":"at")+s.circle.map(w)+","+l(n)+","+j(r)+","+l(n=p)+","+j(r=o);break;case "h":t+="l"+l(n=y+q[0])+","+j(r);break;case "v":t+="l"+l(n)+","+j(r=u+q[0]);break;case "z":t+="x";if(v!=null){t+="m"+l(n=v)+","+j(r=z);v=null}break}}l=Math.max.apply(Math,k);j=Math.max.apply(Math,m);w=Math.min.apply(Math,k);n=Math.min.apply(Math,m);return[t,{left:w,top:n,right:l,bottom:j,
width:l-w,height:j-n}]};ART.Path=new Class({initialize:function(e){if(e instanceof ART.Path){this.path=Array.slice(e.path);this.box=e.box;this.vml=e.vml;this.svg=e.svg}else{var g;if(e==null)g=[];else{g=[];var k=-1;e=e.match(/[a-df-z]|[\-+]?(?:[\d\.]e[\-+]?|[^\s\-+,a-z])+/ig);for(var m=0,l=e.length;m<l;m++){var j=e[m];if(j.match(/^[a-z]/i))g[++k]=[j];else g[k].push(Number(j))}g=g}this.path=g;this.svg=this.vml=this.box=null}return this},push:function(){this.svg=this.vml=this.box=null;this.path.push(Array.slice(arguments));
return this},reset:function(){this.svg=this.vml=this.box=null;this.path=[];return this},move:function(e,g){return this.push("m",e,g)},line:function(e,g){return this.push("l",e,g)},close:function(){return this.push("z")},bezier:function(e,g,k,m,l,j){return this.push("c",e,g,k,m,l,j)},arc:function(e,g,k,m,l){return this.push("a",Math.abs(k||e),Math.abs(m||k||g),0,l?1:0,1,e,g)},counterArc:function(e,g,k,m,l){return this.push("a",Math.abs(k||e),Math.abs(m||k||g),0,l?1:0,0,e,g)},toSVG:function(){if(this.svg==
null){for(var e="",g=0,k=this.path.length;g<k;g++)e+=this.path[g].join(" ");this.svg=e}return this.svg},toVML:function(e){if(this.vml==null){e=f(this.path,e);this.box=e[1];this.vml=e[0]}return this.vml},measure:function(e){if(this.box==null)if(this.path.length){e=f(this.path,e);this.box=e[1];this.vml=e[2]}else{this.box={left:0,top:0,right:0,bottom:0,width:0,height:0};this.svg=this.vml=""}return this.box}});ART.Path.prototype.toString=ART.Path.prototype.toSVG})();
(function(){var h=function(b){return document.createElementNS("http://www.w3.org/2000/svg",b)};ART.SVG=new Class({Extends:ART.Element,Implements:ART.Container,initialize:function(b,d){var a=this.element=h("svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg");a.setAttribute("version",1.1);var c=this.defs=h("defs");a.appendChild(c);b!=null&&d!=null&&this.resize(b,d)},resize:function(b,d){var a=this.element;a.setAttribute("width",b);a.setAttribute("height",d);return this},toElement:function(){return this.element}});
ART.SVG.Element=new Class({Extends:ART.Element,initialize:function(b){this.uid=ART.uniqueID();(this.element=h(b)).setAttribute("id","e"+this.uid);this.transform={translate:[0,0],rotate:[0,0,0],scale:[1,1]}},_writeTransform:function(){var b=[];for(var d in this.transform)b.push(d+"("+this.transform[d].join(",")+")");this.element.setAttribute("transform",b.join(" "))},rotate:function(b,d,a){if(d==null||a==null){a=this.measure();d=a.left+a.width/2;a=a.top+a.height/2}this.transform.rotate=[b,d,a];this._writeTransform();
return this},scale:function(b,d){if(d==null)d=b;this.transform.scale=[b,d];this._writeTransform();return this},translate:function(b,d){this.transform.translate=[b,d];this._writeTransform();return this},setOpacity:function(b){this.element.setAttribute("opacity",b);return this},hide:function(){this.element.setAttribute("display","none");return this},show:function(){this.element.setAttribute("display","");return this}});ART.SVG.Group=new Class({Extends:ART.SVG.Element,Implements:ART.Container,initialize:function(){this.parent("g");
this.defs=h("defs");this.element.appendChild(this.defs);this.children=[]},measure:function(){return ART.Path.measure(this.children.map(function(b){return b.currentPath}))}});ART.SVG.Base=new Class({Extends:ART.SVG.Element,initialize:function(b){this.parent(b);this.element.setAttribute("fill-rule","evenodd");this.fill();this.stroke()},inject:function(b){this.eject();b instanceof ART.SVG.Group&&b.children.push(this);this.container=b;this._injectGradient("fill");this._injectGradient("stroke");this.parent(b);
return this},eject:function(){if(this.container){this.container instanceof ART.SVG.Group&&this.container.children.erase(this);this.parent();this._ejectGradient("fill");this._ejectGradient("stroke");this.container=null}return this},_injectGradient:function(b){if(this.container)(b=this[b+"Gradient"])&&this.container.defs.appendChild(b)},_ejectGradient:function(b){if(this.container)(b=this[b+"Gradient"])&&this.container.defs.removeChild(b)},_createGradient:function(b,d,a){this._ejectGradient(b);var c=
h(d+"Gradient");this[b+"Gradient"]=c;d=function(g,k){k=Color.detach(k);var m=h("stop");m.setAttribute("offset",g);m.setAttribute("stop-color",k[0]);m.setAttribute("stop-opacity",k[1]);c.appendChild(m)};if("length"in a)for(var f=0,e=a.length-1;f<=e;f++)d(f/e,a[f]);else for(f in a)d(f,a[f]);a="g"+ART.uniqueID();c.setAttribute("id",a);this._injectGradient(b);this.element.removeAttribute("fill-opacity");this.element.setAttribute(b,"url(#"+a+")");return c},_setColor:function(b,d){this._ejectGradient(b);
this[b+"Gradient"]=null;var a=this.element;if(d==null){a.setAttribute(b,"none");a.removeAttribute(b+"-opacity")}else{d=Color.detach(d);a.setAttribute(b,d[0]);a.setAttribute(b+"-opacity",d[1])}},fill:function(b){arguments.length>1?this.fillLinear(arguments):this._setColor("fill",b);return this},fillRadial:function(b,d,a,c,f,e){b=this._createGradient("fill","radial",b);d!=null&&b.setAttribute("fx",d);a!=null&&b.setAttribute("fy",a);c&&b.setAttribute("r",c);if(f==null)f=d;if(e==null)e=a;f!=null&&b.setAttribute("cx",
f);e!=null&&b.setAttribute("cy",e);b.setAttribute("spreadMethod","reflect");return this},fillLinear:function(b,d){var a=this._createGradient("fill","linear",b);d=(d==null?270:d)*Math.PI/180;var c=Math.cos(d),f=-Math.sin(d),e=(Math.abs(c)+Math.abs(f))/2;c*=e;f*=e;a.setAttribute("x1",0.5-c);a.setAttribute("x2",0.5+c);a.setAttribute("y1",0.5-f);a.setAttribute("y2",0.5+f);return this},stroke:function(b,d,a,c){var f=this.element;f.setAttribute("stroke-width",d!=null?d:1);f.setAttribute("stroke-linecap",
a!=null?a:"round");f.setAttribute("stroke-linejoin",c!=null?c:"round");this._setColor("stroke",b);return this}});ART.SVG.Shape=new Class({Extends:ART.SVG.Base,initialize:function(b){this.parent("path");b!=null&&this.draw(b)},getPath:function(){return this.currentPath||new ART.Path},draw:function(b){this.currentPath=b instanceof ART.Path?b:new ART.Path(b);this.element.setAttribute("d",this.currentPath.toSVG());return this},measure:function(){return this.getPath().measure()}});ART.SVG.Image=new Class({Extends:ART.SVG.Base,
initialize:function(){this.parent("image");arguments.length==3&&this.draw.apply(this,arguments)},draw:function(b,d,a){var c=this.element;c.setAttributeNS("http://www.w3.org/1999/xlink","href",b);c.setAttribute("width",d);c.setAttribute("height",a);return this}})})();
(function(){ART.VML=new Class({Extends:ART.Element,Implements:ART.Container,initialize:function(a,c){this.vml=document.createElement("vml");this.element=document.createElement("av:group");this.vml.appendChild(this.element);this.children=[];a!=null&&c!=null&&this.resize(a,c)},inject:function(a){if(a.element)a=a.element;a.appendChild(this.vml)},resize:function(a,c){this.width=a;this.height=c;var f=this.vml.style;f.pixelWidth=a;f.pixelHeight=c;f=this.element.style;f.width=a;f.height=c;this.element.coordorigin=
"50,50";this.element.coordsize=a*100+","+c*100;this.children.each(function(e){e._transform()});return this},toElement:function(){return this.vml}});var h,b={},d=function(a){if(h)b[a]=h.addRule("av\\:"+a,"behavior:url(#default#VML);display:inline-block;position:absolute;left:0px;top:0px;")};ART.VML.init=function(a){var c=a.namespaces;if(!c)return false;c.add("av","urn:schemas-microsoft-com:vml");c.add("ao","urn:schemas-microsoft-com:office:office");h=a.createStyleSheet();h.addRule("vml","display:inline-block;position:relative;overflow:hidden;");
d("fill");d("stroke");d("path");d("group");return true};ART.VML.Element=new Class({Extends:ART.Element,initialize:function(a){this.uid=ART.uniqueID();a in b||d(a);(this.element=document.createElement("av:"+a)).setAttribute("id","e"+this.uid);this.transform={translate:[0,0],scale:[1,1],rotate:[0,0,0]}},inject:function(a){this.eject();this.container=a;a.children.include(this);this._transform();this.parent(a);return this},eject:function(){if(this.container){this.container.children.erase(this);this.container=
null;this.parent()}return this},_transform:function(){var a=this.left||0,c=this.top||0,f=this.width,e=this.height;if(!(f==null||e==null)){var g=this.transform,k=g.translate,m=g.scale,l=g.rotate;g=f;var j=e,w=a,n=c,r=k[0];k=k[1];var p=l[0],o=l[1],s=l[2],t=p/180*Math.PI;l=Math.sin(t);t=Math.cos(t);o=f/2-o;s=e/2-s;r-=t*-(o+a)+l*(s+c)+o;k-=t*-(s+c)-l*(o+a)+s;g/=m[0];j/=m[1];w/=m[0];n/=m[1];g*=100;j*=100;w*=100;n*=100;r*=100;k*=100;f*=100;e*=100;a=this.element;a.coordorigin=w+","+n;a.coordsize=g+","+j;
a.style.left=r;a.style.top=k;a.style.width=f;a.style.height=e;a.style.rotation=p}},translate:function(a,c){this.transform.translate=[a,c];this._transform();return this},scale:function(a,c){if(c==null)c=a;this.transform.scale=[a,c];this._transform();return this},rotate:function(a,c,f){if(c==null||f==null){f=this.measure(100);c=f.left+f.width/2;f=f.top+f.height/2}this.transform.rotate=[a,c,f];this._transform();return this},hide:function(){this.element.style.display="none";return this},show:function(){this.element.style.display=
"";return this}});ART.VML.Group=new Class({Extends:ART.VML.Element,Implements:ART.Container,initialize:function(){this.parent("group");this.children=[]},inject:function(a){this.parent(a);this.width=a.width;this.height=a.height;this._transform();return this},eject:function(){this.parent();this.width=this.height=null;return this}});ART.VML.Base=new Class({Extends:ART.VML.Element,initialize:function(a){this.parent(a);a=this.element;var c=this.fillElement=document.createElement("av:fill");c.on=false;
a.appendChild(c);c=this.strokeElement=document.createElement("av:stroke");c.on=false;a.appendChild(c)},_createGradient:function(a,c){var f=this.fillElement;this.element.removeChild(f);f.type=a;f.method="none";f.rotate=true;var e=[],g,k,m=function(w,n){n=Color.detach(n);if(g==null)g=n;else k=n;e.push(w+" "+n[0])};if("length"in c)for(var l=0,j=c.length-1;l<=j;l++)m(l/j,c[l]);else for(l in c)m(l,c[l]);f.color=g[0];f.color2=k[0];f.colors=e;f.opacity=k[1];f["ao:opacity2"]=g[1];f.on=true;this.element.appendChild(f);
return f},_setColor:function(a,c){var f=this[a+"Element"];if(c==null)f.on=false;else{c=Color.detach(c);f.color=c[0];f.opacity=c[1];f.on=true}},fill:function(a){if(arguments.length>1)this.fillLinear(arguments);else{var c=this.fillElement;c.type="solid";c.color2="";c["ao:opacity2"]="";if(c.colors)c.colors.value="";this._setColor("fill",a)}return this},fillRadial:function(a,c,f,e){a=this._createGradient("gradientradial",a);a.focus=50;a.focussize="0 0";a.focusposition=(c==null?0.5:c)+","+(f==null?0.5:
f);a.focus=e==null||e>0.5?"100%":Math.round(e*200)+"%";return this},fillLinear:function(a,c){var f=this._createGradient("gradient",a);f.focus="100%";f.angle=c==null?0:(90+c)%360;return this},stroke:function(a,c,f,e){var g=this.strokeElement;g.weight=c!=null?c/2+"pt":1;g.endcap=f!=null?f=="butt"?"flat":f:"round";g.joinstyle=e!=null?e:"round";this._setColor("stroke",a);return this}});ART.VML.Shape=new Class({Extends:ART.VML.Base,initialize:function(a){this.parent("shape");var c=this.pathElement=document.createElement("av:path");
c.gradientshapeok=true;this.element.appendChild(c);a!=null&&this.draw(a)},getPath:function(){return this.currentPath},draw:function(a){this.currentPath=a instanceof ART.Path?a:new ART.Path(a);this.currentVML=this.currentPath.toVML(100);a=this.currentPath.measure(100);this.right=a.right;this.bottom=a.bottom;this.top=a.top;this.left=a.left;this.height=a.height;this.width=a.width;this._transform();this._redraw(this._radial);return this},measure:function(){return this.getPath().measure()},_redraw:function(a){var c=
this.currentVML||"";if(this._radial=a){var f=Math.round((this.left+this.width*a.x)*100),e=Math.round((this.top+this.height*a.y)*100),g=Math.round(this.width*a.r*100);a=Math.round(this.height*a.r*100);g=["wa",f-g,e-a,f+g,e+a].join(" ");c=["m",f,e-a,"l",f,e-a,c,"m",f,e-a,g,f,e-a,f,e+a,g,f,e+a,f,e-a,g,f,e-a,f,e+a,g,f,e+a,f,e-a,"ns e",c,"nf"].join(" ")}this.element.path=c+"e"},fill:function(){this._redraw();return this.parent.apply(this,arguments)},fillLinear:function(){this._redraw();return this.parent.apply(this,
arguments)},fillRadial:function(a,c,f,e,g,k){this.parent.apply(this,arguments);if(c==null)c=0.5;if(f==null)f=0.5;if(e==null)e=0.5;if(g==null)g=c;if(k==null)k=f;g+=g-c;k+=k-f;this.fillElement.focus="50%";this._redraw({x:g,y:k,r:e*2});return this}})})();
(function(){var h=function(){var b=document.implementation;return b&&b.hasFeature&&b.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}()?"SVG":ART.VML.init(document)?"VML":null;if(h){ART.Shape=new Class({Extends:ART[h].Shape});ART.Group=new Class({Extends:ART[h].Group});ART.implement({Extends:ART[h]})}})();
(function(){var h={};ART.registerFont=function(b){var d=b.face,a=d["font-family"];h[a]||(h[a]={});a=h[a];var c=d["font-weight"]>400;d=d["font-stretch"]=="oblique";if(c&&d)a.boldItalic=b;else if(c)a.bold=b;else if(d)a.italic=b;else a.normal=b;return this};ART.Font=new Class({Extends:ART.Shape,initialize:function(b,d,a,c){this.parent();b!=null&&a!=null&&c!=null&&this.draw(b,d,a,c)},draw:function(b,d,a,c){if(typeof b=="string")b=h[b][(d||"normal").camelCase()];if(!b)throw new Error("The specified font has not been found.");
c/=b.face["units-per-em"];d=0;for(var f=c*b.face.ascent,e="",g=0,k=a.length;g<k;++g){var m=b.glyphs[a.charAt(g)]||b.glyphs[" "],l=c*(m.w||b.w);if(m.d){e=e;m="m"+m.d+"x";for(var j=c,w=d,n="",r=/([mrvxe])([^a-z]*)/g,p=void 0;p=r.exec(m);){var o=p[2].split(",");switch(p[1]){case "v":n+="c "+j*o[0]+","+j*o[1]+","+j*o[2]+","+j*o[3]+","+j*o[4]+","+j*o[5];break;case "r":n+="l "+j*o[0]+","+j*o[1];break;case "m":n+="M "+(w+j*o[0])+","+(f+j*o[1]);break;case "x":n+="z";break}}e=e+n}d+=l}this.fontSize={width:d,
height:c*(b.face.ascent-b.face.descent)};return this.parent(e)},measure:function(){return this.fontSize||this.parent()}})})();
ART.Rectangle=new Class({Extends:ART.Shape,initialize:function(h,b,d){this.parent();h!=null&&b!=null&&this.draw(h,b,d)},draw:function(h,b,d){var a=new ART.Path;if(d){if(typeof d=="number")d=[d,d,d,d];var c=d[0],f=d[1],e=d[2];d=d[3];if(c<0)c=0;if(f<0)f=0;if(d<0)d=0;if(e<0)e=0;a.move(0,c);h<0&&a.move(h,0);b<0&&a.move(0,b);c>0&&a.arc(c,-c);a.line(Math.abs(h)-(f+c),0);f>0&&a.arc(f,f);a.line(0,Math.abs(b)-(f+e));e>0&&a.arc(-e,e);a.line(-Math.abs(h)+(e+d),0);d>0&&a.arc(-d,-d);a.line(0,-Math.abs(b)+(d+c))}else a.move(0,
0).line(h,0).line(0,b).line(-h,0).line(0,-b);return this.parent(a)}});ART.Pill=new Class({Extends:ART.Rectangle,draw:function(h,b){return this.parent(h,b,(h<b?h:b)/2)}});ART.Ellipse=new Class({Extends:ART.Shape,initialize:function(h,b){this.parent();h!=null&&b!=null&&this.draw(h,b)},draw:function(h,b){var d=new ART.Path,a=h/2,c=b/2;d.move(0,c).arc(h,0,a,c).arc(-h,0,a,c);return this.parent(d)}});
ART.Wedge=new Class({Extends:ART.Shape,initialize:function(h,b,d,a){this.parent();if(h!=null||b!=null)this.draw(h,b,d,a)},draw:function(h,b,d,a){var c=new ART.Path,f=Math.PI*2,e=Math.PI/180;d=d*e%f||0;var g=a*e%f||0;a=Math.min(h||0,b||0);h=Math.max(h||0,b||0);b=d>g?f-d+g:g-d;if(b>=f){c.move(0,h).arc(h*2,0,h).arc(-h*2,0,h);a&&c.move(h-a,0).counterArc(a*2,0,a).counterArc(-a*2,0,a)}else{f=Math.sin(d);e=Math.sin(g);d=Math.cos(d);g=Math.cos(g);var k=e-f,m=g-d,l=a-h;b=b>Math.PI;c.move(h+h*f,h-h*d).arc(h*
k,h*-m,h,h,b).line(l*e,l*-g);a&&c.counterArc(a*-k,a*m,a,a,b)}c.close();return this.parent(c)}});